<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- ============================
         HR Festival Holiday Views
         ============================ -->

    <!-- Form View -->
    <record id="view_hr_festival_holiday_form" model="ir.ui.view">
        <field name="name">hr.festival.holiday.form</field>
        <field name="model">hr.festival.holiday</field>
        <field name="arch" type="xml">
            <form string="Festival Holiday">
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="date"/>
                        <field name="year" readonly="1"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Tree View -->
    <record id="view_hr_festival_holiday_tree" model="ir.ui.view">
        <field name="name">hr.festival.holiday.tree</field>
        <field name="model">hr.festival.holiday</field>
        <field name="arch" type="xml">
            <list string="Festival Holidays" editable="top">
                <field name="name"/>
                <field name="date"/>
                <field name="year" readonly="1"/>
            </list>
        </field>
    </record>

    <!-- Action -->
    <record id="action_hr_festival_holiday" model="ir.actions.act_window">
        <field name="name">Festival Holidays</field>
        <field name="res_model">hr.festival.holiday</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Add the 12 Yearly Festival Holidays
            </p>
            <p>
                Configure Pongal, Republic Day, Tamil New Year, May Day, Bakrid,
                Independence Day, Ganesh Chaturthi, Gandhi Jayanthi,
                Vijaya Dashami, Diwali, Christmas, and Thiruvalluvar Day.
            </p>
        </field>
    </record>

    <!-- Menu (under Leaves configuration) -->
    <menuitem
        id="menu_hr_festival_holiday"
        name="Festival Holidays"
        action="action_hr_festival_holiday"
        sequence="50"/>

    <!-- ============================
         Working Schedule: Employee Group Rule Field
         (resource.calendar form)
         ============================ -->
    <record id="view_resource_calendar_form_group_rule" model="ir.ui.view">
        <field name="name">resource.calendar.form.employee.group.rule</field>
        <field name="model">resource.calendar</field>
        <field name="inherit_id" ref="hr.resource_calendar_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name="employee_group_rule"
                       string="Employee Group / LOP Rule"
                       placeholder="Select the payroll group rule for this scheduleâ€¦"/>
            </xpath>
        </field>
    </record>

    <!-- ============================
         HR Payslip: Group LOP Summary Tab
         ============================ -->
    <record id="view_hr_payslip_form_inherit_group" model="ir.ui.view">
        <field name="name">hr.payslip.form.group.summary</field>
        <field name="model">hr.payslip</field>
        <field name="inherit_id" ref="hr_payroll.view_hr_payslip_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page string="Group LOP Summary" name="group_lop_summary">
                    <group string="Group-Based Payroll Breakdown">
                        <group string="Days">
                            <field name="total_working_days_in_month"/>
                            <field name="paid_days"/>
                            <field name="unpaid_days"/>
                        </group>
                        <group string="Amounts">
                            <field name="paid_amount"/>
                            <field name="unpaid_amount"/>
                        </group>
                    </group>
                    <group string="Overtime / Compensation (Group 2 &amp; 3 Only)">
                        <group>
                            <field name="sunday_worked_days" string="Sundays Worked"/>
                            <field name="festival_worked_days" string="Festival Days Worked"/>
                        </group>
                        <group>
                            <field name="lop_compensated_days" string="LOP Offset (Sunday Work)"/>
                            <field name="double_pay_days" string="Double Pay Days"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

</odoo>
